<!DOCTYPE html>
<html>
    <header>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>TEST</title>

        <script>
            //set the embed link here

            /*
            async function load_script(id) {
                const url = `//genius.com/songs/${id}/embed.js`;
                const res = await fetch(url);
                const script_text = await res.text();

                eval(script_text);
            }*/

            async function set_embed() {
                let data = await fetch("/embed_data");
                let json_data = await data.json();
                console.log(json_data);
                let id = json_data["id"];
                let url = json_data["url"];
                let title = json_data["title"];
                let artist = json_data["artist"];

                document.getElementById("embed").innerHTML = `<div id="rg_embed_link_${id}" class="rg_embed_link" data-song-id="${id}">Read <a href="${url}">"${title}" by ${artist}</a> on Genius></div>`;
                //load_script(id);
            }
            set_embed();
        </script>

    </header>
    <body>
        <div id="embed"></div>
        <script src="/embed_script.js"></script>
    </body>
</html>